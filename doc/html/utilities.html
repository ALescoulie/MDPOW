

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Helper modules &mdash; MDpow v0.4.2 documentation</title>
    <link rel="stylesheet" href="_static/default.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '',
        VERSION:     '0.4.2',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="MDpow v0.4.2 documentation" href="index.html" />
    <link rel="next" title="The mdpow-* scripts" href="scripts.html" />
    <link rel="prev" title="mdpow.analysis — Collection of analysis and plotting functions" href="analysis.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="scripts.html" title="The mdpow-* scripts"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="analysis.html" title="mdpow.analysis — Collection of analysis and plotting functions"
             accesskey="P">previous</a> |</li>
        <li><a href="index.html">MDpow v0.4.2 documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="helper-modules">
<h1>Helper modules<a class="headerlink" href="#helper-modules" title="Permalink to this headline">¶</a></h1>
<p>The code described here is only relevant for developers.</p>
<span class="target" id="module-mdpow.config"></span><div class="section" id="mdpow-config-configuration-for-pow">
<h2><a class="reference internal" href="#module-mdpow.config" title="mdpow.config"><tt class="xref py py-mod docutils literal"><span class="pre">mdpow.config</span></tt></a> &#8211; Configuration for POW<a class="headerlink" href="#mdpow-config-configuration-for-pow" title="Permalink to this headline">¶</a></h2>
<p>The config module provides configurable options for the whole package;
eventually it might grow into a sophisticated configuration system such as
matplotlib&#8217;s rc system but right now it mostly serves to define which gromacs
tools and other scripts are offered in the package and where template files are
located. If the user wants to change anything they will still have to do it
here in source until a better mechanism with rc files has been implemented.</p>
<div class="section" id="force-field">
<h3>Force field<a class="headerlink" href="#force-field" title="Permalink to this headline">¶</a></h3>
<p>By default, MDPOW uses a collection of OPLS/AA force field files based on the
Gromacs 4.5.3 distribution, with the following differences:</p>
<ul class="simple">
<li>For ions we use the new alkali and halide ion parameters from Table 2 in
<a class="reference internal" href="#jensen2006">[Jensen2006]</a> which had shown some small improvements in the paper. They
should only be used with the TIP4P water model.</li>
<li>OPLS/AA parameters for 1-octanol were added. These parameters were validated
against experimental data by computing the density (neat), hydration free
energy and logP (the latter being a self consistentcy check).</li>
</ul>
<p>The force field files are found in the directory pointed to by the environment
variable <span class="target" id="index-0"></span><tt class="xref std std-envvar docutils literal"><span class="pre">GMXLIB</span></tt>. By default, <a class="reference internal" href="#module-mdpow.config" title="mdpow.config"><tt class="xref py py-mod docutils literal"><span class="pre">mdpow.config</span></tt></a> sets
<span class="target" id="index-1"></span><tt class="xref std std-envvar docutils literal"><span class="pre">GMXLIB</span></tt> to <a class="reference internal" href="#mdpow.config.includedir" title="mdpow.config.includedir"><tt class="xref py py-data docutils literal"><span class="pre">includedir</span></tt></a> unless <span class="target" id="index-2"></span><tt class="xref std std-envvar docutils literal"><span class="pre">GMXLIB</span></tt> has already been
set. This mechanism allows the user to override the choice of location of force
field.</p>
<p>At the moment, only OPLS/AA is tested with MDPOW although in principle it is
possible to use other force fields by supplying appropriately customized
template files.</p>
<p class="rubric">References</p>
<table class="docutils citation" frame="void" id="jensen2006" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id1">[Jensen2006]</a></td><td>Jensen &amp; Jorgensen JCTC 2 (2006), 1499.</td></tr>
</tbody>
</table>
</div>
<div class="section" id="location-of-template-files">
<h3>Location of template files<a class="headerlink" href="#location-of-template-files" title="Permalink to this headline">¶</a></h3>
<p><em>Template variables</em> list files in the package that can be used as
templates such as run input files. Because the package can be a zipped
egg we actually have to unwrap these files at this stage but this is
completely transparent to the user.</p>
<dl class="data">
<dt id="mdpow.config.templates">
<tt class="descclassname">mdpow.config.</tt><tt class="descname">templates</tt><a class="headerlink" href="#mdpow.config.templates" title="Permalink to this definition">¶</a></dt>
<dd><p><em>POW</em> comes with a number of templates for run input files
and queuing system scripts. They are provided as a convenience and
examples but <strong>WITHOUT ANY GUARANTEE FOR CORRECTNESS OR SUITABILITY FOR
ANY PURPOSE</strong>.</p>
<p>All template filenames are stored in
<a class="reference external" href="http://sbcb.bioch.ox.ac.uk/oliver/software/GromacsWrapper/html/gromacs/core/config.html#gromacs.config.templates" title="(in GromacsWrapper v0.2)"><tt class="xref py py-data docutils literal"><span class="pre">gromacs.config.templates</span></tt></a>. Templates have to be extracted from
the GromacsWrapper python egg file because they are used by external
code: find the actual file locations from this variable.</p>
<p><strong>Gromacs mdp templates</strong></p>
<blockquote>
<div><p>These are supplied as examples and there is <em>NO GUARANTEE THAT THEY
PRODUCE SENSIBLE OUTPUT</em> &#8212; check for yourself!  Note that only
existing parameter names can be modified with
<a class="reference external" href="http://sbcb.bioch.ox.ac.uk/oliver/software/GromacsWrapper/html/gromacs/blocks/cbook.html#gromacs.cbook.edit_mdp" title="(in GromacsWrapper v0.2)"><tt class="xref py py-func docutils literal"><span class="pre">gromacs.cbook.edit_mdp()</span></tt></a> at the moment; if in doubt add the
parameter with its gromacs default value (or empty values) and
modify later with <a class="reference external" href="http://sbcb.bioch.ox.ac.uk/oliver/software/GromacsWrapper/html/gromacs/blocks/cbook.html#gromacs.cbook.edit_mdp" title="(in GromacsWrapper v0.2)"><tt class="xref py py-func docutils literal"><span class="pre">edit_mdp()</span></tt></a>.</p>
<p>The safest bet is to use one of the <tt class="docutils literal"><span class="pre">mdout.mdp</span></tt> files produced by
<tt class="xref py py-func docutils literal"><span class="pre">gromacs.grompp()</span></tt> as a template as this mdp contains all
parameters that are legal in the current version of Gromacs.</p>
</div></blockquote>
</dd></dl>

<dl class="data">
<dt id="mdpow.config.topfiles">
<tt class="descclassname">mdpow.config.</tt><tt class="descname">topfiles</tt><a class="headerlink" href="#mdpow.config.topfiles" title="Permalink to this definition">¶</a></dt>
<dd><p>List of all topology files that are included in the package.
(includes force field files under <tt class="docutils literal"><span class="pre">top/oplsaa.ff</span></tt>)</p>
</dd></dl>

<dl class="data">
<dt id="mdpow.config.includedir">
<tt class="descclassname">mdpow.config.</tt><tt class="descname">includedir</tt><a class="headerlink" href="#mdpow.config.includedir" title="Permalink to this definition">¶</a></dt>
<dd><p>The package&#8217;s include directory for <tt class="xref py py-func docutils literal"><span class="pre">gromacs.grompp()</span></tt>; the
environment variable <span class="target" id="index-3"></span><tt class="xref std std-envvar docutils literal"><span class="pre">GMXLIB</span></tt> is set to <a class="reference internal" href="#mdpow.config.includedir" title="mdpow.config.includedir"><tt class="xref py py-data docutils literal"><span class="pre">includedir</span></tt></a>
so that the bundled version of the force field is picked up.</p>
</dd></dl>

</div>
<div class="section" id="functions">
<h3>Functions<a class="headerlink" href="#functions" title="Permalink to this headline">¶</a></h3>
<p>The following functions can be used to access configuration data.</p>
<dl class="function">
<dt id="mdpow.config.get_template">
<tt class="descclassname">mdpow.config.</tt><tt class="descname">get_template</tt><big>(</big><em>t</em><big>)</big><a class="headerlink" href="#mdpow.config.get_template" title="Permalink to this definition">¶</a></dt>
<dd><p>Find template file <em>t</em> and return its real path.</p>
<p><em>t</em> can be a single string or a list of strings. A string
should be one of</p>
<ol class="arabic simple">
<li>a relative or absolute path,</li>
<li>a filename in the package template directory (defined in the template dictionary
<a class="reference external" href="http://sbcb.bioch.ox.ac.uk/oliver/software/GromacsWrapper/html/gromacs/core/config.html#gromacs.config.templates" title="(in GromacsWrapper v0.2)"><tt class="xref py py-data docutils literal"><span class="pre">gromacs.config.templates</span></tt></a>) or</li>
<li>a key into <a class="reference external" href="http://sbcb.bioch.ox.ac.uk/oliver/software/GromacsWrapper/html/gromacs/core/config.html#gromacs.config.templates" title="(in GromacsWrapper v0.2)"><tt class="xref py py-data docutils literal"><span class="pre">templates</span></tt></a>.</li>
</ol>
<p>The first match (in this order) is returned. If the argument is a
single string then a single string is returned, otherwise a list
of strings.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Arguments :</th><td class="field-body"><em>t</em> : template file or key (string or list of strings)</td>
</tr>
<tr class="field"><th class="field-name">Returns :</th><td class="field-body">os.path.realpath(<em>t</em>) (or a list thereof)</td>
</tr>
<tr class="field"><th class="field-name">Raises :</th><td class="field-body"><tt class="xref py py-exc docutils literal"><span class="pre">ValueError</span></tt> if no file can be located.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="mdpow.config.get_templates">
<tt class="descclassname">mdpow.config.</tt><tt class="descname">get_templates</tt><big>(</big><em>t</em><big>)</big><a class="headerlink" href="#mdpow.config.get_templates" title="Permalink to this definition">¶</a></dt>
<dd><p>Find template file(s) <em>t</em> and return their real paths.</p>
<p><em>t</em> can be a single string or a list of strings. A string should
be one of</p>
<ol class="arabic simple">
<li>a relative or absolute path,</li>
<li>a filename in the package template directory (defined in the template dictionary
<a class="reference external" href="http://sbcb.bioch.ox.ac.uk/oliver/software/GromacsWrapper/html/gromacs/core/config.html#gromacs.config.templates" title="(in GromacsWrapper v0.2)"><tt class="xref py py-data docutils literal"><span class="pre">gromacs.config.templates</span></tt></a>) or</li>
<li>a key into <a class="reference external" href="http://sbcb.bioch.ox.ac.uk/oliver/software/GromacsWrapper/html/gromacs/core/config.html#gromacs.config.templates" title="(in GromacsWrapper v0.2)"><tt class="xref py py-data docutils literal"><span class="pre">templates</span></tt></a>.</li>
</ol>
<p>The first match (in this order) is returned for each input argument.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Arguments :</th><td class="field-body"><em>t</em> : template file or key (string or list of strings)</td>
</tr>
<tr class="field"><th class="field-name">Returns :</th><td class="field-body">list of os.path.realpath(<em>t</em>)</td>
</tr>
<tr class="field"><th class="field-name">Raises :</th><td class="field-body"><tt class="xref py py-exc docutils literal"><span class="pre">ValueError</span></tt> if no file can be located.</td>
</tr>
</tbody>
</table>
</dd></dl>

<p class="rubric">Developer note</p>
<p>Templates have to be extracted from the egg because they are used by external
code. All template filenames are stored in <tt class="xref py py-data docutils literal"><span class="pre">config.templates</span></tt> or
<tt class="xref py py-data docutils literal"><span class="pre">config.topfiles</span></tt>.</p>
<p>Sub-directories are extracted (see <a class="reference external" href="http://packages.python.org/distribute/pkg_resources.html#resource-extraction">Resource extraction</a>) but the file names
themselves will not appear in the template dict. Thus, only store files in
subdirectories that don&#8217;t have to be explicitly found by the package (e.g. the
Gromacs force field files are ok).</p>
<dl class="function">
<dt id="mdpow.config._generate_template_dict">
<tt class="descclassname">mdpow.config.</tt><tt class="descname">_generate_template_dict</tt><big>(</big><em>dirname</em><big>)</big><a class="headerlink" href="#mdpow.config._generate_template_dict" title="Permalink to this definition">¶</a></dt>
<dd><p>Generate a list of included top-level files <em>and</em> extract them to a temp space.</p>
<p>Only lists files and directories at the <em>top level</em> of the <em>dirname</em>;
however, all directories are extracted recursively and will be available.</p>
</dd></dl>

</div>
</div>
<span class="target" id="module-mdpow.log"></span><div class="section" id="mdpow-log-configure-logging-for-pow-analysis">
<h2><a class="reference internal" href="#module-mdpow.log" title="mdpow.log"><tt class="xref py py-mod docutils literal"><span class="pre">mdpow.log</span></tt></a> &#8212; Configure logging for POW analysis<a class="headerlink" href="#mdpow-log-configure-logging-for-pow-analysis" title="Permalink to this headline">¶</a></h2>
<p>Import this module if logging is desired in application code and
create the logger in <tt class="docutils literal"><span class="pre">__init__.py</span></tt>:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">log</span>
<span class="n">logger</span> <span class="o">=</span> <span class="n">log</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">logname</span><span class="p">,</span> <span class="n">logfile</span><span class="p">)</span>
</pre></div>
</div>
<p>In modules simply use:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">logging</span>
<span class="n">logger</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">(</span><span class="n">logname</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Helper modules</a><ul>
<li><a class="reference internal" href="#mdpow-config-configuration-for-pow"><tt class="docutils literal"><span class="pre">mdpow.config</span></tt> &#8211; Configuration for POW</a><ul>
<li><a class="reference internal" href="#force-field">Force field</a></li>
<li><a class="reference internal" href="#location-of-template-files">Location of template files</a></li>
<li><a class="reference internal" href="#functions">Functions</a></li>
</ul>
</li>
<li><a class="reference internal" href="#mdpow-log-configure-logging-for-pow-analysis"><tt class="docutils literal"><span class="pre">mdpow.log</span></tt> &#8212; Configure logging for POW analysis</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="analysis.html"
                        title="previous chapter"><tt class="docutils literal docutils literal docutils literal"><span class="pre">mdpow.analysis</span></tt> &#8212; Collection of analysis and plotting functions</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="scripts.html"
                        title="next chapter">The <tt class="docutils literal docutils literal"><span class="pre">mdpow-*</span></tt> scripts</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="_sources/utilities.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" size="18" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="scripts.html" title="The mdpow-* scripts"
             >next</a> |</li>
        <li class="right" >
          <a href="analysis.html" title="mdpow.analysis — Collection of analysis and plotting functions"
             >previous</a> |</li>
        <li><a href="index.html">MDpow v0.4.2 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2010–2011, Oliver Beckstein and Bogdan Iorga.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.0.7.
    </div>
  </body>
</html>